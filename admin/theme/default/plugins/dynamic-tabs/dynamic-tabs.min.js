!function(e){var t=[];function n(e){var t=e.toLowerCase();return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(new RegExp("\\s","g"),"")).replace(new RegExp("[àáâãäå]","g"),"a")).replace(new RegExp("æ","g"),"ae")).replace(new RegExp("ç","g"),"c")).replace(new RegExp("[èéêë]","g"),"e")).replace(new RegExp("[ìíîï]","g"),"i")).replace(new RegExp("ñ","g"),"n")).replace(new RegExp("[òóôõö]","g"),"o")).replace(new RegExp("œ","g"),"oe")).replace(new RegExp("[ùúûü]","g"),"u")).replace(new RegExp("[ýÿ]","g"),"y")).replace(new RegExp("\\W","g"),"")).replace(/[^\w\s]/gi,"")}e.fn.bootstrapDynamicTabs=function(t){e.extend({},t);return 0==this.find(".nav-tabs").length?this.append(e("<ul/>",{class:"nav nav-tabs"}).sortable({connectWith:this})):this.find(".nav-tabs").sortable({connectWith:this}),0==this.find(".tab-content").length&&this.append(e("<div/>",{class:"tab-content"})),this},e.fn.addTab=function(i){var r=e.extend({title:"User",closable:!0},i);if(r.id?r.id=n(r.id):r.id=n(r.title),t.indexOf(r.id)>=0){this.find(".nav-tabs").find("li").find('a[href="#'+r.id+'"]').tab("show"),e(r.id).tab("show")}else{t.push(r.id),btn_close=e("<button/>",{class:"close btn btn-box-tool",type:"button",onclick:"closeTab('"+r.id+"', event);"}).html('<i class="fa fa-close"></i>').click(function(n){n.stopPropagation(),closer=e(this),a=closer.parent(),href=a.attr("href"),a.parent().remove();var i=e(href).hasClass("active");e(href).remove();var r=href.substring(1);if(t.splice(t.indexOf(r),1),i){e(".nav-tabs li:eq(0) a").tab("show");var s=e(".tab-content").find(".active");activateTab(s.attr("id"))}}),this.find(".active").removeClass("active");var s=e("<a/>",{href:"#"+r.id,"data-toggle":"tab",onclick:"activateTab('"+r.id+"', event);"});if(r.closable&&s.mousedown(function(n){if(n.stopPropagation(),2==n.which){a=e(this),href=a.attr("href"),a.parent().remove();var i=e(href).hasClass("active");e(href).remove();var r=href.substring(1);return t.splice(t.indexOf(r),1),i&&e(".nav-tabs li:eq(0) a").tab("show"),!1}}),r.icon&&s.append(e("<i/>").addClass(r.icon)).append(" "),r.closable&&s.append(btn_close),s.append(r.title),r.loadScripts)if("string"==typeof r.loadScripts){var l=e("<script/>",{type:"text/javascript",src:r.loadScripts});e("head").append(l),btn_close.on("click",function(){l.remove()})}else if("object"==typeof r.loadScripts){for(var c=[],o=0;o<r.loadScripts.length;o++){l=e("<script/>",{type:"text/javascript",src:r.loadScripts[o]});c.push(l),e("head").append(l)}btn_close.on("click",function(){for(var e=0;e<c.length;e++)c[e].remove()})}if(r.loadStyles)if("string"==typeof r.loadStyles){var p=e("<link/>",{href:r.loadStyles,rel:"stylesheet",type:"text/css"});e("head").append(p),btn_close.on("click",function(){p.remove()})}else if("object"==typeof r.loadStyles){var f=[];for(o=0;o<r.loadStyles.length;o++){p=e("<link/>",{href:r.loadStyles[o],rel:"stylesheet",type:"text/css"});f.push(p),e("head").append(p)}btn_close.on("click",function(){for(var e=0;e<f.length;e++)f[e].remove()})}chatTabs.addTab('<li class="active">'+e("<div/>").append(s.clone()).html()+"</li>"),this.find(".tab-content").append(e("<div/>",{class:"tab-pane active",id:r.id}));var h=this.find(".tab-content").find("#"+r.id);r.text&&h.text(r.text),r.html&&h.html(r.html),r.ajaxUrl&&e.ajax({mimeType:"text/html; charset=utf-8",url:r.ajaxUrl,type:"GET",success:function(e){h.html(e)},error:function(e,t,a){alert(a)},dataType:"html"})}return this},e.fn.closeById=function(n){a=this.find(".nav-tabs").find('a[href="#'+n+'"]'),href=a.attr("href"),a.parent().remove();var i=e(href).hasClass("active");e(href).remove();var r=href.substring(1);if(t.splice(t.indexOf(r),1),i&&void 0!==e(".scroll_tab_inner li:eq(0) a").attr("href")){var s=e(".scroll_tab_inner li:eq(0) a").attr("href").replace("#","");activateTab(s)}},e.fn.closeThis=function(){a=this.find(".nav-tabs").find(".active").find("a"),href=a.attr("href"),a.parent().remove();var n=e(href).hasClass("active");e(href).remove();var i=href.substring(1);t.splice(t.indexOf(i),1),n&&e(".nav-tabs li:eq(0) a").tab("show")}}(jQuery);